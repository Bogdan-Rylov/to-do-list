{% extends "base/_base.html" %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center mt-3 mb-4">
    <h1>TODO list</h1>

    <a href="{% url 'to_do:home-create' %}" class="btn btn-primary">Add
      Task</a>
  </div>

  {% for task in task_list %}
    <div>
      <div class="d-flex justify-content-between align-items-center mt-3">
        <h5>
          <span>
            {{ task.content }}
          </span>

          {% if task.is_done %}
            <span style="color: green">Done</span>
          {% else %}
            <span style="color: red">Not done</span>
          {% endif %}
        </h5>

        {% if task.is_done %}
          <a href="{% url 'to_do:toggle-task-is-done' pk=task.id %}"
             class="btn btn-secondary">Undo</a>
        {% else %}
          <a href="{% url 'to_do:toggle-task-is-done' pk=task.id %}"
             class="btn btn-success">Complete</a>
        {% endif %}
      </div>

      <div>
        <p style="display: inline-block; margin: 0">
          Created: {{ task.date_created }}</p>
        {% if task.date_deadline %}
          <p style="display: inline-block; margin: 0; color: darkred">
            Deadline: {{ task.date_deadline }}</p>
        {% endif %}
      </div>

      {% if task.tags.all.count > 0 %}
        <p style="margin: 0">Tags:
          {% for tag in task.tags.all %}
            {{ tag.name }}{% if not forloop.last %} {% endif %}
          {% endfor %}
        </p>
      {% endif %}

      <div>
        <a href="{% url 'to_do:home-update' pk=task.id %}"
           class="btn btn-link">Update</a>
        <form style="display: inline-block"
              action="{% url 'to_do:home-delete' pk=task.pk %}" method="post">
          {% csrf_token %}
          <input type="submit" class="btn btn-link" value="Delete">
        </form>
      </div>
    </div>
    <hr style="color: #5050520d; opacity: 1;" class="mt-3">

  {% empty %}
    <p>There are no tasks.</p>

  {% endfor %}

{% endblock %}
